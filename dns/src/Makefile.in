# ***** BEGIN LICENSE BLOCK *****
# Mozilla 3e Calendar Extension
# Copyright Â© 2010  Zonio s.r.o.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
# ***** END LICENSE BLOCK *****

DEPTH = ../../../../..
topsrcdir = @top_srcdir@
srcdir = @srcdir@
VPATH = @srcdir@

include $(DEPTH)/config/autoconf.mk

MODULE = calendar3e
XPI_NAME = calendar3e

LIBRARY_NAME = calendar3edns
IS_COMPONENT = 1
USE_STATIC_LIBS = 1

ifneq ($(OS_ARCH),WINNT)
EXTRA_DSO_LIBS = \
	resolv \
	$(NULL)
else
EXTRA_LIBS += \
	wsock32.lib \
	dnsapi.lib \
	$(NULL)
endif

REQUIRES = \
	xpcom \
	string \
	pref \
	$(NULL)

CPPSRCS = \
	nsDNSTXTService.cpp \
	nsHostResolver.cpp \
	nsDNSTXTModule.cpp \
	$(NULL)

CSRCS = \
	dns.c \
	$(NULL)

include $(topsrcdir)/config/rules.mk

EXTRA_DSO_LDOPTS += \
	$(XPCOM_GLUE_LDOPTS) \
	$(NSPR_LIBS) \
	$(EXTRA_DSO_LIBS) \
	$(NULL)
